# Requirements To-Do

- [x] 상품 엔티티 생성
- [x] 상품 레포지토리
- [x] 주문 엔티티 생성
- [x] 주문 레포지토리

- [x] 관심상품 엔티티 생성
- [x] 관심상품 유저 연관관계 편의메서드 레포지토리
- [x] 관심상품 컨트롤러 작성
- [x] 관심상품 서비스 작성
- [x] 관심상품 컨트롤러 테스트
- [x] 관심상품 서비스 테스트
- [x] 관심상품 레포지토리 테스트

- [x] 상품 전체 조회 컨틀롤러 작성
- [x] 상품 전체 조회 서비스 작성
- [x] 상품 전체 조회 컨트롤러 테스트
- [x] 상품 전체 조회 서비스 테스트
- [x] 상품 상세 조회 컨틀롤러 작성
- [x] 상품 상세 조회 서비스 작성
- [x] 상품 상세 조회 컨트롤러 테스트
- [x] 상품 상세 조회 서비스 테스트

- [x] 체결 거래 내역 조회 컨틀롤러 작성
- [x] 체결 거래 내역 조회 서비스 작성
- [x] 체결 거래 내역 조회 컨트롤러 테스트
- [x] 체결 거래 내역 조회 서비스 테스트

- [ ] 판매 입찰가 조회 컨틀롤러 작성
- [ ] 판매 입찰가 조회 서비스 작성
- [ ] 판매 입찰가 조회 컨틀롤러 작성
- [ ] 판매 입찰가 조회 서비스 작성

- [ ] 구매 입찰가 조회 컨트롤러 테스트
- [ ] 구매 입찰가 조회 서비스 테스트
- [ ] 구매 입찰가 조회 컨트롤러 테스트
- [ ] 구매 입찰가 조회 서비스 테스트

# Refactor List

- [ ] @Valid 달 부분 없는지 Refactor
    - [ ] ProductQueryOrderFactory 로직 개선
      > Product의 컬럼에 대한 Sort값이 들어오지 않는 경우 예외처리

```java
/**
 List<String> orderCriterias = pageable.getSort().stream()
 .map(Order::getProperty)
 .toList();
 OrderCriteriaValidator.validateOrderCriteria(Issue.class, orderCriterias);
 **/
public final class OrderCriteriaValidator {

    public static void validateOrderCriteria(Class<?> target, List<String> orderCriterias) {
        if (Objects.isNull(orderCriterias)) {
            return;
        }
        List<String> fields = Arrays.stream(target.getDeclaredFields())
            .map(Field::getName)
            .toList();
        boolean hasNotOrderCriteria = orderCriterias.stream()
            .anyMatch(criteria -> !fields.contains(criteria));
        if (hasNotOrderCriteria) {
            throw new InvalidOrderCriteriaException();
        }
    }
}
```

- [ ] 관심상품 > userDetails 를 통해 userService를 사용하여 user를 가져와야함

# Test List

- [x] ProductMapper Test
- [x] OrderMapper Test
- [x] ProductQueryConditionFactory Test
- [x] ProductQueryOrderFactory Test
- [x] 체결 거래 내역 조회 컨트롤러 테스트
- [x] 체결 거래 내역 조회 서비스 테스트

- [ ] ProductRepositoryCustomImpl Test
- [ ] ProductQueryServiceImpl Test
    - [ ] findAll
    - [ ] findAllBy
    - [ ] findAllByPaging
    - [ ] findBy
- [ ] ProductCommendServiceImpl Test
    - [ ] likeProduct
    - [ ] dislikeProduct
    - [ ] getProductBy
- [ ] OrderCriteriaValidator Test